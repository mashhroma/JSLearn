<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .content {
            width: 70vw;
        }

        .user {
            display: flex;
            gap: 20px;
            border: 1px solid black;
            padding-left: 8px;
        }

        .name {
            font-weight: bold;
        }
    </style>
</head>

<body>
    <div class="content"></div>

    <script>
        // TASK 1
        // Создайте функцию delayedMessage(message, delay), которая принимает аргументы message (строка) и delay (число). Функция должна выводить заданное сообщение в консоль через указанную задержку.
        // Вызовите функцию delayedMessage() три раза с разными сообщениями и задержками. Например:
        // delayedMessage("Сообщение 1", 2000)
        // delayedMessage("Сообщение 2", 1000)
        // delayedMessage("Сообщение 3", 3000)
        // После вызова всех функций delayedMessage(), добавьте сообщение вида "Конец программы" с помощью console.log().

        // let max = 0;

        // function delayedMessage(message, delay) {
        //     setTimeout(() => {
        //         console.log(message)
        //     }, delay);
        //     if (delay > max) {
        //         max = delay;
        //     }
        // }

        // delayedMessage("Сообщение 1", 2000);
        // delayedMessage("Сообщение 2", 1000);
        // delayedMessage("Сообщение 3", 3000);
        // setTimeout(() => {
        //     console.log('Конец программы')
        // }, max);


        // TASK 2
        // У вас есть список задач, которые необходимо выполнить в определенном порядке. Каждая задача должна быть выполнена через определенный промежуток времени, заданный в миллисекундах. Вам необходимо написать функцию, которая принимает список задач и интервал времени, а затем выполняет каждую задачу через определенный промежуток времени.
        // const tasks = [
        //     { name: 'task 1', time: 1000 },
        //     { name: 'task 2', time: 2000 },
        //     { name: 'task 3', time: 3000 },
        //     { name: 'task 4', time: 4000 },
        //     { name: 'task 5', time: 5000 }
        // ];

        // function delayedTasks(items) {
        //     items.forEach(item => {
        //         setTimeout(() => {
        //             console.log(item.name);
        //         }, item.time);
        //     });
        // }

        // delayedMessage(tasks);

        // TASK 3
        // Напишите программу, которая загружает данные с сервера с использованием функции fetch. Ваша задача — использовать предложенный шаблон запроса для получения данных и их обработки.

        // Создайте функцию, которая отправляет запрос к серверу, используя fetch. Адрес сервера для запроса: https://api.randomdatatools.ru/?count=5 .
        // В функции реализуйте обработку промиса, возвращаемого fetch. Используйте метод .then() для обработки ответа сервера.
        // Проверьте свойство response.ok.
        // Добавьте обработку ошибок с помощью метода .catch(). Выведите сообщение об ошибке в консоль, если в процессе выполнения запроса или обработки данных возникли проблемы.

        // function getDataFromServer(url) {
        //     fetch(url)
        //         .then((response) => {
        //             return response.json();
        //         })
        //         .then((data) => {
        //             data.products.forEach(element => {
        //                 console.log(element.title);
        //             });
        //         })
        //         .catch(error => {
        //             console.error('error');
        //         });
        // }


        // getDataFromServer('https://dummyjson.com/products');



        // TASK 4
        // Разработайте простой веб-интерфейс для отображения списка пользователей, получаемого с сервера. Вам необходимо отобразить имена пользователей и их email-адреса.
        // Используйте функцию fetch для отправки GET-запроса к https://jsonplaceholder.typicode.com/users . Этот запрос вернет JSON-массив объектов пользователей.
        // В обработчике .then() преобразуйте полученный ответ в JSON.
        // После успешного получения и преобразования ответа в JSON, отобразите на странице список пользователей. Для каждого пользователя покажите его имя и email. Для отображения можно использовать любой HTML-элемент, например, ul для списка и li для элементов списка.
        // Добавьте базовую обработку ошибок, чтобы в случае неудачного запроса на странице отображалось сообщение об ошибке.
        // const content = document.querySelector('.content');

        // function getDataFromServer(url) {
        //     fetch(url)
        //         .then((response) => {
        //             return response.json();
        //         })
        //         .then((data) => {
        //             data.forEach(item => {
        //                 const user = document.createElement('div');
        //                 user.className = 'user';
        //                 user.innerHTML = `<p class="name">${item.username}</p><p class="email">${item.email}</p>`;
        //                 content.append(user);
        //             });

        //             console.log(data);
        //         })
        //         .catch(error => {
        //             console.error('error');
        //             content.innerHTML = `<strong>Что-то пошло не так...</strong>`;
        //         });
        // }


        // getDataFromServer('https://jsonplaceholder.typicode.com/users');

        const contentEL = document.querySelector('.content');

        function getDataFromServer(url) {
            fetch(url)
                .then((response) => {
                    return response.json();
                })
                .then((data) => {
                    data.forEach(element => {
                        console.log(`Имя ${element.name} почтовый адрес ${element.email}`);
                    });
                    data.forEach(item => {
                        const userEl = document.createElement('div');
                        userEl.className = 'user';
                        userEl.innerHTML = `<p class="name">${item.name}</p><p class="email">${item.email}</p>`;
                        contentEL.append(userEl);
                    });

                })
                .catch(error => {
                    console.error('error');
                    contentEL.innerHTML = `<strong> Что-то пошло не так ...</strong>`;
                });
        }


        getDataFromServer('https://jsonplaceholder.typicode.com/users');

    </script>
</body>

</html>